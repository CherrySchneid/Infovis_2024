Traceback (most recent call last):
  File "/home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages/nbclient/client.py", line 1314, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages/jupyter_core/utils/__init__.py", line 165, in wrapped
    return loop.run_until_complete(inner)
  File "/home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages/nbclient/client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "/home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages/nbclient/client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages/nbclient/client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# Install nbformat if not already installed
%pip install nbformat

import pandas as pd
import plotly.express as px

# Load the dataset
file_path = "C:/Users/jensb/Documents/Kunstmatige Intelligentie/Info Vis/Infovis_2024/Environment_Temperature_change_E_All_Data_NOFLAG.csv"
df = pd.read_csv(file_path, sep=",", encoding='latin1', on_bad_lines='skip', low_memory=False)

# Filter and aggregate the data for temperature changes
temperature_df = df[df['Element'] == 'Temperature change']

# Select a subset of years (e.g., 2000 to 2019)
selected_years = [f"Y{year}" for year in range(1990, 2020)]

# Melt the dataframe to have selected years as a single column
temperature_melted = temperature_df.melt(
    id_vars=['Area'],
    value_vars=selected_years,
    var_name='Year',
    value_name='TemperatureChange'
)

# Clean up the year column
temperature_melted['Year'] = temperature_melted['Year'].str[1:]

# Determine the min and max temperature changes for consistent color scale
min_temp_change = temperature_melted['TemperatureChange'].min()
max_temp_change = temperature_melted['TemperatureChange'].max()

# Create a choropleth map using Plotly
fig = px.choropleth(
    temperature_melted,
    locations="Area",
    locationmode="country names",
    color="TemperatureChange",
    hover_name="Area",
    animation_frame="Year",
    color_continuous_scale=px.colors.sequential.Plasma,
    range_color=(min_temp_change, max_temp_change),
    title="Global Temperature Change (1990-2019)"
)

fig.update_layout(
    geo=dict(
        showframe=False,
        showcoastlines=False,
        projection_type='equirectangular'
    ),
    margin={"r":0,"t":0,"l":0,"b":0}
)

fig.show()

------------------

----- stdout -----
Requirement already satisfied: nbformat in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (5.10.4)
Requirement already satisfied: fastjsonschema>=2.15 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from nbformat) (2.19.1)
Requirement already satisfied: jsonschema>=2.6 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from nbformat) (4.22.0)
Requirement already satisfied: jupyter-core!=5.0.*,>=4.12 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from nbformat) (5.7.2)
Requirement already satisfied: traitlets>=5.1 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from nbformat) (5.14.3)
Requirement already satisfied: attrs>=22.2.0 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from jsonschema>=2.6->nbformat) (23.2.0)
Requirement already satisfied: jsonschema-specifications>=2023.03.6 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from jsonschema>=2.6->nbformat) (2023.12.1)
Requirement already satisfied: referencing>=0.28.4 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from jsonschema>=2.6->nbformat) (0.35.1)
Requirement already satisfied: rpds-py>=0.7.1 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from jsonschema>=2.6->nbformat) (0.18.1)
----- stdout -----
Requirement already satisfied: platformdirs>=2.5 in /home/thierryys/anaconda3/envs/jupyterbook/lib/python3.10/site-packages (from jupyter-core!=5.0.*,>=4.12->nbformat) (4.2.2)
----- stdout -----
Note: you may need to restart the kernel to use updated packages.
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mModuleNotFoundError[0m                       Traceback (most recent call last)
Cell [0;32mIn[2], line 4[0m
[1;32m      1[0m [38;5;66;03m# Install nbformat if not already installed[39;00m
[1;32m      2[0m get_ipython()[38;5;241m.[39mrun_line_magic([38;5;124m'[39m[38;5;124mpip[39m[38;5;124m'[39m, [38;5;124m'[39m[38;5;124minstall nbformat[39m[38;5;124m'[39m)
[0;32m----> 4[0m [38;5;28;01mimport[39;00m [38;5;21;01mpandas[39;00m [38;5;28;01mas[39;00m [38;5;21;01mpd[39;00m
[1;32m      5[0m [38;5;28;01mimport[39;00m [38;5;21;01mplotly[39;00m[38;5;21;01m.[39;00m[38;5;21;01mexpress[39;00m [38;5;28;01mas[39;00m [38;5;21;01mpx[39;00m
[1;32m      7[0m [38;5;66;03m# Load the dataset[39;00m

[0;31mModuleNotFoundError[0m: No module named 'pandas'

